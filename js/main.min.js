Generator={canvas:void 0,ctx:void 0,lat:void 0,lon:void 0,place:void 0,deg:-0.6*Math.random()+.3,init:function(){var o=this;o.canvas=document.getElementById("generator"),o.ctx=o.canvas.getContext("2d"),o.getLocation()},getLocation:function(){var o=this;$.ajax({url:"unesco.json",dataType:"json",type:"GET",error:function(o,e,t){console.log("jqXHR",o),console.log("textStatus",e),console.log("errorThrown",t)},success:function(e){var t=e.QUERYRESULT.DATA,a=Math.floor(Math.random()*(t.length+1));o.lat=t[a][0],o.lon=t[a][1],o.place=t[a][5],o.getFlickr()}})},getFlickr:function(){var o=this;$.ajax({url:"https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=731a3dc1069a15969d725a3805acc530&lat="+o.lat+"&lon="+o.lon+"&extras=url_l&format=json&jsoncallback=?",dataType:"jsonp",type:"GET",error:function(o,e,t){console.log("jqXHR",o),console.log("textStatus",e),console.log("errorThrown",t)},success:function(e){console.log("Flickr Response",e),o.loadFlickrImage(e)}})},loadFlickrImage:function(o){var e=this,t=o.photos.photo;if("undefined"!==t){var a=Math.floor(Math.random()*(t.length+1)),n=t[a].url_l;$("body").append('<img id="bg" src="'+n+'">'),e.bg=document.getElementById("bg"),e.bg.onload=function(){console.log("background loaded"),e.drawBg()}}else e.getFlickr()},drawBg:function(){var o=this;o.ctx.drawImage(o.bg,0,0,600,600,0,0,1e3,1e3),o.drawGlobie(o.deg)},drawGlobie:function(){var o=this,e=document.getElementById("globie");o.ctx.rotate(o.deg),o.ctx.drawImage(e,0,200,700,700),$("#caption").html("Globie visits "+o.place),o.saveImage()},saveImage:function(){}},jQuery(document).ready(function(){"use strict";Generator.init()});
//# sourceMappingURL=/main.min.js.map