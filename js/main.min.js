Generator={canvas:void 0,ctx:void 0,lat:void 0,lon:void 0,place:void 0,deg:-0.6*Math.random()+.3,init:function(){var o=this;o.canvas=document.getElementById("generator"),o.ctx=o.canvas.getContext("2d"),o.getLocation()},getLocation:function(){var o=this;$.ajax({url:"unesco.json",dataType:"json",type:"GET",error:function(o,t,e){console.log("jqXHR",o),console.log("textStatus",t),console.log("errorThrown",e)},success:function(t){var e=t.QUERYRESULT.DATA,n=Math.floor(Math.random()*(e.length+1));o.lat=e[n][0],o.lon=e[n][1],o.place=e[n][5],o.getFlickr()}})},getFlickr:function(){var o=this;$.ajax({url:"https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=731a3dc1069a15969d725a3805acc530&lat="+o.lat+"&lon="+o.lon+"&extras=url_l&format=json&jsoncallback=?",dataType:"jsonp",type:"GET",error:function(o,t,e){console.log("jqXHR",o),console.log("textStatus",t),console.log("errorThrown",e)},success:function(t){console.log("Flickr Response",t),o.loadFlickrImage(t)}})},loadFlickrImage:function(o){var t=this,e=o.photos.photo;if("undefined"!==e){var n=Math.floor(Math.random()*(e.length+1)),a=e[n].url_l;$("body").append('<img id="bg" src="'+a+'">'),t.bg=document.getElementById("bg"),t.bg.onload=function(){console.log("background loaded"),t.drawBg()}}else t.getFlickr()},drawBg:function(){var o=this;o.ctx.drawImage(o.bg,0,0,600,600,0,0,1e3,1e3),o.drawGlobie(o.deg)},drawGlobie:function(){var o=this,t=document.getElementById("globie");o.ctx.rotate(o.deg),o.ctx.drawImage(t,0,200,700,700),$("#caption").html("Globie visits "+o.place),o.saveImage()},saveImage:function(){},urlToData:function(o,t,e){var n=new Image;n.crossOrigin="Anonymous",n.onload=function(){var o,n=document.createElement("converter"),a=n.getContext("2d");n.height=this.height,n.width=this.width,a.drawImage(this,0,0),o=n.toDataURL(e),t(o),n=null},n.src=o}},jQuery(document).ready(function(){"use strict";Generator.init()});
//# sourceMappingURL=/main.min.js.map